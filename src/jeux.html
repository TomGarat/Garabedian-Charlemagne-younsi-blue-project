<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Royaume de BLUE - Jeu</title>
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>

    <div class="character-info">
        <h2 id="characterNameDisplay">Nom: </h2>
        <h3 id="characterClassDisplay">Classe Social: </h3>
        <h3 id="characterItemDisplay">Objet de départ: </h3>
        <h3 id="characterAlignmentDisplay">Alignement: </h3>
        <p id="characterDescriptionDisplay">Description: </p>
    </div>
    

    <div class="player-info">
        <h2 id="playerGold">Pièces d'or : 0</h2>
    </div>
    <div class="player-info">
        <h2 id="playerQi">qi : 0</h2>
    </div>

    <div class="container">
        <h1 id="eventTitle">Titre de l'événement</h1>
        <p id="eventDescription">Description de l'événement</p>
        <img id="eventImage" src="" alt="Image de l'événement" style="max-width: 300px;">
        <div id="choicesContainer">
            <button id="choice1">
                Choix 1
              </button>
            <button id="choice2">
                Choix 2
              </button>
        </div>
    </div>

    <script src="assets/js/game.js"></script>
    <script>
        // Définir la classe Player et les événements (comme mentionné précédemment)

        const player = new Player("Nom du joueur");
        updatePlayerGoldDisplay();
        updatePlayerQiDisplay();

        // Récupération des données du personnage depuis le local storage
const storedCharacterData = JSON.parse(localStorage.getItem('characterData'));

if (storedCharacterData) {
    document.getElementById('characterNameDisplay').textContent += storedCharacterData.name;
    document.getElementById('characterClassDisplay').textContent += storedCharacterData.class;
    document.getElementById('characterItemDisplay').textContent += storedCharacterData.item;
    document.getElementById('characterDescriptionDisplay').textContent = storedCharacterData.description;
    document.getElementById('characterAlignmentDisplay').textContent += (storedCharacterData.alignment > 0 ? "+" : "") + storedCharacterData.alignment + " Qi";

    player.addQi(storedCharacterData.alignment);  // Ajuste le Qi du joueur selon son alignement
    updatePlayerQiDisplay();
}


        function updatePlayerGoldDisplay() {
            const goldDisplay = document.getElementById('playerGold');
            goldDisplay.textContent = `Pièces d'or : ${player.gold}`;
        }

        function updatePlayerQiDisplay() {
            const qiDisplay = document.getElementById('playerQi');
            qiDisplay.textContent = `qi : ${player.qi}`;
        }

        function displayRandomEvent() {
            const currentEvent = events[Math.floor(Math.random() * events.length)];
            
            document.getElementById('eventTitle').textContent = currentEvent.title;
            document.getElementById('eventDescription').textContent = currentEvent.description;
            document.getElementById('eventImage').src = currentEvent.imageUrl;

            // Mise à jour des boutons de choix avec les informations de l'événement actuel
            const choice1Button = document.getElementById('choice1');
            const choice2Button = document.getElementById('choice2');

            choice1Button.textContent = currentEvent.choices[0].text;
            choice2Button.textContent = currentEvent.choices[1].text;

            // Attach event listeners
            choice1Button.onclick = function() {
                handleChoiceClickGold(currentEvent.choices[0]);
                handleChoiceClickQi(currentEvent.choices[0]);
            };
            
            choice2Button.onclick = function() {
                handleChoiceClickGold(currentEvent.choices[1]);
                handleChoiceClickQi(currentEvent.choices[1]);
            };
        }

        function handleChoiceClickGold(choice) {
            if (choice.goldChange > 0) {
                player.addGold(choice.goldChange);                
            } else {
                player.substractGold(choice.goldChange);
            }

            // Gestion du Qi
            if (choice.qi > 0) {
                player.addQi(choice.qi);
            } else {
                player.substractQi(choice.qi);
            }
            
            // Mise à jour de l'affichage pour l'or
            updatePlayerGoldDisplay();

            // Mise à jour de l'affichage pour l'qi
            updatePlayerQiDisplay();
            
            // Afficher l'événement suivant
            displayRandomEvent();
        }

        displayRandomEvent();  // Afficher le premier événement lors du chargement de la page
    </script>
</body>
</html>
        